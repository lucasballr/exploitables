# Use a Debian base image
FROM ubuntu:16.04

# Set environment variables to avoid user interaction during package installation

# Install necessary build dependencies
RUN apt-get update && apt-get install -y \
    build-essential \
    curl \
    python3 \
    python3-pip \
    gdb \
    wget \
    strace \
    git \
    vim \
    locales \
    && rm -rf /var/lib/apt/lists/ 

RUN wget https://github.com/pwndbg/pwndbg/releases/download/2024.02.14/pwndbg_2024.02.14_amd64-portable.tar.gz
RUN tar -v -xf pwndbg_2024.02.14_amd64-portable.tar.gz
RUN ln -s /pwndbg/bin/pwndbg /bin/pwndbg

RUN wget https://dl.packetstormsecurity.net/UNIX/misc/DMitry-1.2a.tar.gz
RUN tar -xvf DMitry-1.2a.tar.gz
RUN cd DMitry-1.2a && ./configure
COPY ./Makefile /DMitry-1.2a/
RUN cd /DMitry-1.2a && make && make install



# Set the locale
RUN sed -i '/en_US.UTF-8/s/^# //g' /etc/locale.gen && \
    locale-gen
ENV LANG en_US.UTF-8
ENV LANGUAGE en_US:en
ENV LC_ALL en_US.UTF-8

CMD ["/bin/bash"]
