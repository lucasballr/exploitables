# The Container

Here is the Dockerfile I've used as a base for most of the environments. It's essential to have a viable container to properly run and test the vulnerable program.
Then we can use the knowledge we gain from the testing in order to build a proper exploit. The container has some basic packages installed to enable
compiling and basic usage. It also has pwndbg installed in order to debug the program that is being evaluated. For exploits requiring a local version
of pwntools installed, I made sure to install pwntools using a python virtual environment and pip. This will also allow you to install any new python
packages that you'd like using pip.

## Container building steps

- Find the vulnerability for the program in question (this can either be through vulnerability research, or on the CVE database)
- Obtain the vulnerable version of the program (this helps if the program is open source so you can build from source)
- Find the dependencies for the program (this can be done with `apt build-dep <program>` or just looking through the source website)
- Add the dependencies to the install list in the `Dockerfile`
- Add the commands for compiling the program to the `Dockerfile` (this usually involves `wget <source>`, `./configure`, `make`, `make install` but you
  can verify on the website of the source)
- Add any pip packages to the container with `RUN /venv/bin/pip/ install <pkg>` in the Dockerfile.
- Make the `ENTRYPOINT` or `CMD` of the `Dockerfile` be the program itself so it will run when the container is run. (if debugging put: ["/bin/bash"]
  then run the program in pwndbg)
- If you want to copy a file into the container use: `COPY <local file> <container location>`

This should give you a good starting container to debug the program and build an exploit. For debugging, you can use `pwndbg`. If you would like to
run the exploit inside the container, make sure the exploit gets copied into the container filesystem and that the dependencies for the exploit are
installed on the container.

## Container running steps

- To run the container interactively: `docker run -it <container name>`
- If you want to mount the current directory in the container (for iterative exploit dev) use the `-v $(PWD):/tmp/` to mount the CWD to /tmp in the
  container.
- Sometimes you might need to run a special command instead of the CMD that you built the container with. For this, you can just type the command at
  the end of the `docker run` command and it will prioritize that one.

## Things to note

- Debian doesn't always work, so I've replaced it with Ubuntu in some instances. Sometimes it's much easier to change the base OS than it is to fix
  whatever problems are causing the program to not compile.
- It's important to use whatever debugging program you feel most comfortable with. For one of these, I was forced to use plain GDB for much of the
  debugging making the process much slower.
- 
