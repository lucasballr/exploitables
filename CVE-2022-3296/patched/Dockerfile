# Use a Debian base image
FROM debian:latest

# Set environment variables to avoid user interaction during package installation
ENV DEBIAN_FRONTEND=noninteractive

# Install necessary build dependencies
RUN apt-get update && apt-get install -y \
    build-essential \
    libncurses-dev \
    curl \
    python3 \
    gdb \
    wget \
    strace \
    git \
    locales \
    && rm -rf /var/lib/apt/lists/ 

RUN wget https://github.com/pwndbg/pwndbg/releases/download/2024.02.14/pwndbg_2024.02.14_amd64-portable.tar.gz
RUN tar -v -xf pwndbg_2024.02.14_amd64-portable.tar.gz
RUN ln -s /pwndbg/bin/pwndbg /bin/pwndbg

COPY vim/ vim/
RUN cd vim && ./configure
COPY ./Makefile /vim/src/
RUN cd vim && make

WORKDIR /vim/src

CMD ["/bin/bash"]
